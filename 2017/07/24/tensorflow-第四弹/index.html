<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.9.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="随感，遥感，机器学习....想到什么写什么"><title>tensorflow-第四弹 | 吴蔚</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/8.0.1/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/3.3.1/jquery.min.js"></script><link rel="icon" mask sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">tensorflow-第四弹</h1><a id="logo" href="/.">吴蔚</a><p class="description">生命不息，折腾不止！</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">tensorflow-第四弹</h1><div class="post-meta">Jul 24, 2017<span> | </span><span class="category"><a href="/categories/学习/">学习</a></span></div><a class="disqus-comment-count" href="/2017/07/24/tensorflow-第四弹/#vcomment"><span class="valine-comment-count" data-xid="/2017/07/24/tensorflow-第四弹/"></span><span> 条评论</span></a><div class="post-content"><p>前面三个部分都是关于深度学习，tensorflow框架的东西，再接着深入就要涉及到了深度学习更加深层次的内容了，涉及到深度卷积和深度置信网络了，这一部分涉及的原理比较多，因此相对来说会比较复杂，而为了进行深度学习我们必须在另一个部分进行比较深入的研究，那就是数据，深度学习必然伴随这大数据，可以说没有大数据就没有深度学习。我们接下来学习跟数据有关的一些内容，主要就是针对数据获取和数据预处理两个部分。<br>我们知道网络上的数据很多，也很复杂，有各种标签的数据，这些数据有的对我们有用，而有些数据对我们来说就没有什么意义了，如何快速获取大量对我们来说有意义的数据是我们亟待解决的问题，所以这一部分看似和tensorflow没有什么关系，实际上它是机器学习的基础，所以我们再后面一部分会着重的介绍数据获取和数据处理，直到这一部分学习完才会继续真正的深度学习方法的学习和介绍，好了废话不多说。<br>我们这次主要讲爬虫，什么是爬虫或者说robot，简单的来说就是能够从网上获取数据的工具，而这样的工具都是通过代码实现的，我们把这样的代码或者工具就叫做爬虫。好了介绍完爬虫我们基本上就知道爬虫是干什么的了，没错爬虫就是替代我们从网上获取数据的，那么它的工作原理是怎么样的呢，我们会通过两个网站的分析进行介绍：  </p>
<ul>
<li>京东数据爬虫：<br>说到第一个爬虫必须详细介绍一下整个分析过程，在进行数据爬取过程中有一个很重要的过程那就是网站的分析，对我们需要爬取的数据的分析，我们简单的看一下京东的网站特点：<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"gl-item"</span> <span class="attr">data-sku</span>=<span class="string">"10979250498"</span> <span class="attr">data-spu</span>=<span class="string">"10171150160"</span> <span class="attr">data-pid</span>=<span class="string">"10979250498"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"gl-i-wrap"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"p-img"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">a</span> <span class="attr">target</span>=<span class="string">"_blank"</span> <span class="attr">href</span>=<span class="string">"//item.jd.com/10979250498.html"</span> <span class="attr">onclick</span>=<span class="string">"searchlog(1,10979250498,22,2,'','flagsClk=1614807180')"</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">img</span> <span class="attr">width</span>=<span class="string">"220"</span> <span class="attr">height</span>=<span class="string">"220"</span> <span class="attr">class</span>=<span class="string">"err-product"</span> <span class="attr">data-img</span>=<span class="string">"1"</span> <span class="attr">data-lazy-img</span>=<span class="string">"//img13.360buyimg.com/n7/jfs/t6349/155/1512158350/203785/22921fdf/595224a5N9d0a2565.jpg"</span> /&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">data-catid</span>=<span class="string">"655"</span> <span class="attr">data-jq</span>=<span class="string">"1"</span> <span class="attr">data-dq</span>=<span class="string">"1"</span> <span class="attr">data-venid</span>=<span class="string">"608833"</span> <span class="attr">data-template</span>=<span class="string">"868771_n"</span> <span class="attr">data-promise</span>=<span class="string">"600_0"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"p-scroll"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"ps-prev"</span>&gt;</span>&amp;lt;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"ps-next"</span>&gt;</span>&amp;gt;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"ps-wrap"</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"ps-main"</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"ps-item"</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"javascript:;"</span> <span class="attr">class</span>=<span class="string">"curr"</span> <span class="attr">title</span>=<span class="string">"玫瑰金"</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">data-sku</span>=<span class="string">"10979250498"</span> <span class="attr">data-img</span>=<span class="string">"1"</span> <span class="attr">data-lazy-img</span>=<span class="string">"//img13.360buyimg.com/n9/jfs/t6349/155/1512158350/203785/22921fdf/595224a5N9d0a2565.jpg"</span> <span class="attr">class</span>=<span class="string">"err-product"</span> <span class="attr">width</span>=<span class="string">"25"</span> <span class="attr">height</span>=<span class="string">"25"</span> /&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">										<span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"ps-item"</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"javascript:;"</span> <span class="attr">title</span>=<span class="string">"香槟金"</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">data-sku</span>=<span class="string">"10979250499"</span> <span class="attr">data-img</span>=<span class="string">"1"</span> <span class="attr">width</span>=<span class="string">"25"</span> <span class="attr">height</span>=<span class="string">"25"</span> <span class="attr">data-lazy-img</span>=<span class="string">"//img14.360buyimg.com/n9/jfs/t6436/43/1478836466/244215/e2aff1c7/595224b2N8b62ebb3.jpg"</span> <span class="attr">class</span>=<span class="string">"err-product"</span> /&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">									<span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"p-price"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">strong</span> <span class="attr">class</span>=<span class="string">"J_10979250498"</span> <span class="attr">data-price</span>=<span class="string">"629.00"</span>&gt;</span><span class="tag">&lt;<span class="name">em</span>&gt;</span>¥<span class="tag">&lt;/<span class="name">em</span>&gt;</span><span class="tag">&lt;<span class="name">i</span>&gt;</span>629.00<span class="tag">&lt;/<span class="name">i</span>&gt;</span><span class="tag">&lt;/<span class="name">strong</span>&gt;</span>		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"p-name p-name-type-2"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">a</span> <span class="attr">target</span>=<span class="string">"_blank"</span> <span class="attr">title</span>=<span class="string">"小米 红米4A 全网通 4G手机 玫瑰金 移动4G/联通4G/电信4G( 2G+16G)"</span> <span class="attr">href</span>=<span class="string">"//item.jd.com/10979250498.html"</span> <span class="attr">onclick</span>=<span class="string">"searchlog(1,10979250498,22,1,'','flagsClk=1614807180')"</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">em</span>&gt;</span>小米 红米4A 全网通 4G<span class="tag">&lt;<span class="name">font</span> <span class="attr">class</span>=<span class="string">"skcolor_ljg"</span>&gt;</span>手机<span class="tag">&lt;/<span class="name">font</span>&gt;</span> 玫瑰金 移动4G/联通4G/电信4G( 2G+16G)<span class="tag">&lt;/<span class="name">em</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"promo-words"</span> <span class="attr">id</span>=<span class="string">"J_AD_10979250498"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"p-commit"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">strong</span>&gt;</span>已有<span class="tag">&lt;<span class="name">a</span> <span class="attr">id</span>=<span class="string">"J_comment_10979250498"</span> <span class="attr">target</span>=<span class="string">"_blank"</span> <span class="attr">href</span>=<span class="string">"//item.jd.com/10979250498.html#comment"</span> <span class="attr">onclick</span>=<span class="string">"searchlog(1,10979250498,22,3,'','flagsClk=1614807180')"</span>&gt;</span>7200+<span class="tag">&lt;/<span class="name">a</span>&gt;</span>条评价<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"p-focus"</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"J_focus"</span> <span class="attr">data-sku</span>=<span class="string">"10979250498"</span> <span class="attr">href</span>=<span class="string">"javascript:;"</span> <span class="attr">title</span>=<span class="string">"点击关注"</span> <span class="attr">onclick</span>=<span class="string">"searchlog(1,10979250498,22,5,'','flagsClk=1614807180')"</span>&gt;</span><span class="tag">&lt;<span class="name">i</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span>关注<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"p-shop"</span> <span class="attr">data-selfware</span>=<span class="string">"0"</span> <span class="attr">data-score</span>=<span class="string">"5"</span> <span class="attr">data-reputation</span>=<span class="string">"95"</span> <span class="attr">data-shopid</span>=<span class="string">"602745"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"p-icons"</span> <span class="attr">id</span>=<span class="string">"J_pro_10979250498"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"goods-icons J-picon-tips J-picon-fix"</span> <span class="attr">data-tips</span>=<span class="string">"京东发货，商家提供售后服务"</span>&gt;</span>京东配送<span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"p-addtocart hide"</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">data-stock</span>=<span class="string">"10979250498"</span> <span class="attr">data-stock-val</span>=<span class="string">"1"</span> <span class="attr">data-presale</span>=<span class="string">"0"</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"gl-item"</span> <span class="attr">data-sku</span>=<span class="string">"10424732616"</span> <span class="attr">data-spu</span>=<span class="string">"10092705106"</span> <span class="attr">data-pid</span>=<span class="string">"10424732616"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"gl-i-wrap"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"p-img"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">a</span> <span class="attr">target</span>=<span class="string">"_blank"</span> <span class="attr">href</span>=<span class="string">"//item.jd.com/10424732616.html"</span> <span class="attr">onclick</span>=<span class="string">"searchlog(1,10424732616,23,2,'','flagsClk=1614807688')"</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">img</span> <span class="attr">width</span>=<span class="string">"220"</span> <span class="attr">height</span>=<span class="string">"220"</span> <span class="attr">class</span>=<span class="string">"err-product"</span> <span class="attr">data-img</span>=<span class="string">"1"</span> <span class="attr">data-lazy-img</span>=<span class="string">"//img11.360buyimg.com/n7/jfs/t6067/294/5480602146/435008/896f90bc/596c13c1Ne4dd122a.jpg"</span> /&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">data-catid</span>=<span class="string">"655"</span> <span class="attr">data-jq</span>=<span class="string">"1"</span> <span class="attr">data-dq</span>=<span class="string">"1"</span> <span class="attr">data-venid</span>=<span class="string">"190328"</span> <span class="attr">data-promise</span>=<span class="string">"330_0"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"p-scroll"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"ps-prev"</span>&gt;</span>&amp;lt;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"ps-next"</span>&gt;</span>&amp;gt;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"ps-wrap"</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"ps-main"</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"ps-item"</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"javascript:;"</span> <span class="attr">class</span>=<span class="string">"curr"</span> <span class="attr">title</span>=<span class="string">"橙色"</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">data-sku</span>=<span class="string">"10424732616"</span> <span class="attr">data-img</span>=<span class="string">"1"</span> <span class="attr">data-lazy-img</span>=<span class="string">"//img11.360buyimg.com/n9/jfs/t6067/294/5480602146/435008/896f90bc/596c13c1Ne4dd122a.jpg"</span> <span class="attr">class</span>=<span class="string">"err-product"</span> <span class="attr">width</span>=<span class="string">"25"</span> <span class="attr">height</span>=<span class="string">"25"</span> /&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">										<span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"ps-item"</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"javascript:;"</span> <span class="attr">title</span>=<span class="string">"黑色"</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">data-sku</span>=<span class="string">"10424732618"</span> <span class="attr">data-img</span>=<span class="string">"1"</span> <span class="attr">width</span>=<span class="string">"25"</span> <span class="attr">height</span>=<span class="string">"25"</span> <span class="attr">data-lazy-img</span>=<span class="string">"//img13.360buyimg.com/n9/jfs/t5650/199/6735451344/399114/a807ca0f/596c1404N200d8049.jpg"</span> <span class="attr">class</span>=<span class="string">"err-product"</span> /&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">										<span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"ps-item"</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"javascript:;"</span> <span class="attr">title</span>=<span class="string">"军绿色"</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">data-sku</span>=<span class="string">"10424732617"</span> <span class="attr">data-img</span>=<span class="string">"1"</span> <span class="attr">width</span>=<span class="string">"25"</span> <span class="attr">height</span>=<span class="string">"25"</span> <span class="attr">data-lazy-img</span>=<span class="string">"//img12.360buyimg.com/n9/jfs/t6118/118/5549490934/419480/e566b797/596c13deN659fbf22.jpg"</span> <span class="attr">class</span>=<span class="string">"err-product"</span> /&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">									<span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"p-price"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">strong</span> <span class="attr">class</span>=<span class="string">"J_10424732616"</span> <span class="attr">data-price</span>=<span class="string">"268.00"</span>&gt;</span><span class="tag">&lt;<span class="name">em</span>&gt;</span>¥<span class="tag">&lt;/<span class="name">em</span>&gt;</span><span class="tag">&lt;<span class="name">i</span>&gt;</span>268.00<span class="tag">&lt;/<span class="name">i</span>&gt;</span><span class="tag">&lt;/<span class="name">strong</span>&gt;</span>		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"p-name p-name-type-2"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">a</span> <span class="attr">target</span>=<span class="string">"_blank"</span> <span class="attr">title</span>=<span class="string">"中兴健康（ZTE Health）L628  移动/联通2G 三防直板老人手机 橙色"</span> <span class="attr">href</span>=<span class="string">"//item.jd.com/10424732616.html"</span> <span class="attr">onclick</span>=<span class="string">"searchlog(1,10424732616,23,1,'','flagsClk=1614807688')"</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">em</span>&gt;</span>中兴健康（ZTE Health）L628  移动/联通2G 三防直板老人<span class="tag">&lt;<span class="name">font</span> <span class="attr">class</span>=<span class="string">"skcolor_ljg"</span>&gt;</span>手机<span class="tag">&lt;/<span class="name">font</span>&gt;</span> 橙色<span class="tag">&lt;/<span class="name">em</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"promo-words"</span> <span class="attr">id</span>=<span class="string">"J_AD_10424732616"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"p-commit"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">strong</span>&gt;</span>已有<span class="tag">&lt;<span class="name">a</span> <span class="attr">id</span>=<span class="string">"J_comment_10424732616"</span> <span class="attr">target</span>=<span class="string">"_blank"</span> <span class="attr">href</span>=<span class="string">"//item.jd.com/10424732616.html#comment"</span> <span class="attr">onclick</span>=<span class="string">"searchlog(1,10424732616,23,3,'','flagsClk=1614807688')"</span>&gt;</span>1.5万+<span class="tag">&lt;/<span class="name">a</span>&gt;</span>条评价<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"p-focus"</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"J_focus"</span> <span class="attr">data-sku</span>=<span class="string">"10424732616"</span> <span class="attr">href</span>=<span class="string">"javascript:;"</span> <span class="attr">title</span>=<span class="string">"点击关注"</span> <span class="attr">onclick</span>=<span class="string">"searchlog(1,10424732616,23,5,'','flagsClk=1614807688')"</span>&gt;</span><span class="tag">&lt;<span class="name">i</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span>关注<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"p-shop"</span> <span class="attr">data-selfware</span>=<span class="string">"0"</span> <span class="attr">data-score</span>=<span class="string">"5"</span> <span class="attr">data-reputation</span>=<span class="string">"96"</span> <span class="attr">data-shopid</span>=<span class="string">"184371"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"p-icons"</span> <span class="attr">id</span>=<span class="string">"J_pro_10424732616"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"goods-icons J-picon-tips J-picon-fix"</span> <span class="attr">data-tips</span>=<span class="string">"京东发货，商家提供售后服务"</span>&gt;</span>京东配送<span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"p-addtocart hide"</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">data-stock</span>=<span class="string">"10424732616"</span> <span class="attr">data-stock-val</span>=<span class="string">"1"</span> <span class="attr">data-presale</span>=<span class="string">"0"</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>截取了一部分进行分析，我们看到其实所有手机列表都在标签\<li>\</li>之间，然后我们进行两步匹配，所谓的两步匹配就是首先通过正则表达式<sub>[1]</sub>匹配所有\<li>\</li>之间的数据，然后在进行进一步分析我们看到，所有手机的图片都在其中的<img>标签内，根据这样我们可以找到所有图片的链接，最后根据图片链接获取图片。好了一个网页我们就获取到了，那么如何获取下一页呢，这个就要分析网页的url了，我们分析京东手机网站的url：<a href="https://search.jd.com/Search?keyword=%E6%89%8B%E6%9C%BA&amp;enc=utf-8&amp;wq=%E6%89%8B%E6%9C%BA" target="_blank" rel="noopener">https://search.jd.com/Search?keyword=%E6%89%8B%E6%9C%BA&amp;enc=utf-8&amp;wq=%E6%89%8B%E6%9C%BA</a><br>分析上面那个网站，可以很清楚的看出，搜索的过程，更进一步，我们看到下一页：<br><a href="https://search.jd.com/Search?keyword=%E6%89%8B%E6%9C%BA&amp;enc=utf-8&amp;qrst=1&amp;rt=1&amp;stop=1&amp;vt=2&amp;wq=%E6%89%8B%E6%9C%BA&amp;cid2=653&amp;cid3=655&amp;page=3&amp;s=56" target="_blank" rel="noopener">https://search.jd.com/Search?keyword=%E6%89%8B%E6%9C%BA&amp;enc=utf-8&amp;qrst=1&amp;rt=1&amp;stop=1&amp;vt=2&amp;wq=%E6%89%8B%E6%9C%BA&amp;cid2=653&amp;cid3=655&amp;page=3&amp;s=56</a><br>好了，我们比较一下有那些区别，我们看到多了一些参数，其实这些参数大部分都没有什么用，除了那个page，没错，我们修改page后面就是我们要得到的下一页，那么问题就来了，为什么明明是第二页那个page的值是3,这就是京东的一个trick了，网站下一页是+2而不是+1,这个我们多看几个网站就能找到规律了，知道这个后我们就可以去爬取网站了，每次爬取page的一个网站，从网站中解析所有img的url，然后下载下来，保存到本地，好了，一个简单的明文网站的爬取就到这里了，下面我们介绍难一点的网站，比如百度图片<br>我们从百度上搜一个图片，然后查看网页源码我们可以看到，与京东的明显的网页不一样的是，百度的网页都是脚本代码，实际上我们还是可以得到一些有用信息的，这里就不详细分析了，实际上百度搜索返回的是json格式的数据，所以我们目标是解析json格式数据得到url，不过只要有就不怕解析不到，但是这里有一个小技巧必须要提一下，我们用图片搜索的时候并不是像京东那样下一页的变化，所以直接从地址也看不到什么，因为其是相应式的，所以我们进入调试模式看它request提交得到的东西，我们看到实际上它提交的是：<a href="http://image.baidu.com/search/avatarjson?tn=resultjsonavatarnew&amp;ie=utf-8&amp;word=%E8%BE%B9%E7%89%A7&amp;rn=60&amp;pn=60" target="_blank" rel="noopener">http://image.baidu.com/search/avatarjson?tn=resultjsonavatarnew&amp;ie=utf-8&amp;word=%E8%BE%B9%E7%89%A7&amp;rn=60&amp;pn=60</a><br>这样一个网站，同样有很多参数，但是同样参数对我们来说最有用的rn是pn后面的参数，实际上它确定了一次向后跳60页以及当前的页数，所以我们同样可以以这样的形式获取下一页的搜索结果，另外我们看搜索结果：<br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">"lifeTrackHead"</span>:<span class="string">""</span>, <span class="attr">"pageType"</span>:<span class="string">"0"</span>, <span class="attr">"setNumber"</span>:<span class="number">0</span>, <span class="attr">"IsAvatarQuery"</span>:<span class="string">"0"</span>, <span class="attr">"avatarCategory"</span>:<span class="string">""</span>, <span class="attr">"tagZero"</span>:<span class="string">""</span>, <span class="attr">"tagOne"</span>:<span class="string">""</span>, <span class="attr">"tagTwo"</span>:<span class="string">""</span>, <span class="attr">"tagFatherSelected"</span>:<span class="string">""</span>, <span class="attr">"tagSelected"</span>:<span class="string">""</span>, <span class="attr">"tags"</span>:[], <span class="attr">"simgs"</span>:[],<span class="attr">"tag"</span>:<span class="string">""</span>, <span class="attr">"AVnum"</span>:<span class="string">"0"</span>, <span class="attr">"imgtotal"</span>:<span class="string">"1985"</span>, <span class="attr">"displayNum"</span>:<span class="string">""</span>, <span class="attr">"gsm"</span>: <span class="string">"78"</span>, <span class="attr">"listNum"</span>:<span class="string">"1985"</span>, <span class="attr">"headPic"</span>:&#123; <span class="attr">"status"</span>:<span class="string">""</span>, <span class="attr">"query"</span>:<span class="string">""</span>, <span class="attr">"desc"</span>:<span class="string">""</span>, <span class="attr">"sign"</span>:<span class="string">""</span>, <span class="attr">"obj_url"</span>:<span class="string">""</span>, <span class="attr">"from_url"</span>:<span class="string">""</span>, <span class="attr">"url"</span>:<span class="string">""</span>, <span class="attr">"summary"</span>:<span class="string">""</span>, <span class="attr">"pageNum"</span>:<span class="string">"-1"</span>, <span class="attr">"tagTwo"</span>:<span class="string">""</span>, <span class="attr">"thumbURL"</span>:<span class="string">""</span>, <span class="attr">"width"</span>:<span class="string">""</span>, <span class="attr">"height"</span>:<span class="string">""</span>&#125;, <span class="attr">"imgs"</span>:[&#123; <span class="attr">"thumbURL"</span>:<span class="string">"http://img1.imgtn.bdimg.com/it/u=3598937744,2157458349&amp;fm=26&amp;gp=0.jpg"</span>, <span class="attr">"middleURL"</span>:<span class="string">"http://img1.imgtn.bdimg.com/it/u=3598937744,2157458349&amp;fm=26&amp;gp=0.jpg"</span>, <span class="attr">"largeTnImageUrl"</span>:<span class="string">""</span>, <span class="attr">"hasLarge"</span> : <span class="literal">true</span>, <span class="attr">"hoverURL"</span>:<span class="string">"http://img1.imgtn.bdimg.com/it/u=3598937744,2157458349&amp;fm=26&amp;gp=0.jpg"</span>, <span class="attr">"pageNum"</span>:<span class="number">60</span>, <span class="attr">"objURL"</span>:<span class="string">"http://c.hiphotos.baidu.com/zhidao/pic/item/f636afc379310a55b1d71ec4b44543a98226100a.jpg"</span>, <span class="attr">"fromURL"</span>:<span class="string">"http://zhidao.baidu.com/question/1494493144181586139.html"</span>, <span class="attr">"fromURLHost"</span>:<span class="string">"zhidao.baidu.com"</span>, <span class="attr">"currentIndex"</span>:<span class="string">""</span>, <span class="attr">"width"</span>:<span class="number">2448</span>, <span class="attr">"height"</span>:<span class="number">3264</span>, <span class="attr">"type"</span>:<span class="string">"jpg"</span>, <span class="attr">"filesize"</span>:<span class="string">""</span>, <span class="attr">"bdSrcType"</span>:<span class="string">"0"</span>, <span class="attr">"di"</span>:<span class="string">"194609389151"</span>, <span class="attr">"is"</span>:<span class="string">"0,0"</span>, <span class="attr">"bdSetImgNum"</span>:<span class="number">0</span>, <span class="attr">"bdImgnewsDate"</span>:<span class="string">"1970-01-01 08:00"</span>, <span class="attr">"fromPageTitle"</span>:<span class="string">"鎴戣寰楀簲璇ユ槸杈圭墽鍚�  杩欐槸鐜板湪鐨勬牱瀛�"</span>, <span class="attr">"bdSourceName"</span>:<span class="string">""</span>, <span class="attr">"bdFromPageTitlePrefix"</span>:<span class="string">""</span>, <span class="attr">"isAspDianjing"</span>:<span class="literal">false</span>, <span class="attr">"token"</span>:<span class="string">""</span>, <span class="attr">"source_type"</span>:<span class="string">""</span>, <span class="attr">"tagTwo"</span>:<span class="string">""</span>, <span class="attr">"cs"</span>:<span class="string">"3598937744,2157458349"</span>, <span class="attr">"os"</span>:<span class="string">"4201772925,2284092193"</span>, <span class="attr">"simid"</span>:<span class="string">"3198441173,82549856"</span>, <span class="attr">"pi"</span>:<span class="string">"0"</span>, <span class="attr">"adType"</span>:<span class="string">"0"</span>, <span class="attr">"setDowloadURL"</span>:<span class="string">""</span>, <span class="attr">"setTittle"</span>:<span class="string">""</span>, <span class="attr">"DecorateCompanyName"</span>:<span class="string">""</span>, <span class="attr">"DecorateCompanyLocation"</span>:<span class="string">""</span>, <span class="attr">"DecorateWantuUrl"</span>:<span class="string">""</span>, <span class="attr">"DecorateCompanyId"</span>:<span class="string">""</span>, <span class="attr">"DecorateCompanyGrade"</span>:<span class="string">""</span>, <span class="attr">"personalized"</span>:<span class="string">"0"</span> &#125;,&#123; <span class="attr">"thumbURL"</span>:<span class="string">"http://img4.imgtn.bdimg.com/it/u=1150363191,333734041&amp;fm=26&amp;gp=0.jpg"</span>, <span class="attr">"middleURL"</span>:<span class="string">"http://img4.imgtn.bdimg.com/it/u=1150363191,333734041&amp;fm=26&amp;gp=0.jpg"</span>, <span class="attr">"largeTnImageUrl"</span>:<span class="string">""</span>, <span class="attr">"hasLarge"</span> : <span class="literal">true</span>, <span class="attr">"hoverURL"</span>:<span class="string">"http://img4.imgtn.bdimg.com/it/u=1150363191,333734041&amp;fm=26&amp;gp=0.jpg"</span>, <span class="attr">"pageNum"</span>:<span class="number">61</span>, <span class="attr">"objURL"</span>:<span class="string">"http://h.hiphotos.baidu.com/zhidao/pic/item/728da9773912b31bb7f204fc8018367adbb4e14d.jpg"</span>, <span class="attr">"fromURL"</span>:<span class="string">"http://zhidao.baidu.com/question/329112378851785325.html"</span>, <span class="attr">"fromURLHost"</span>:<span class="string">"zhidao.baidu.com"</span>, <span class="attr">"currentIndex"</span>:<span class="string">""</span>, <span class="attr">"width"</span>:<span class="number">1024</span>, <span class="attr">"height"</span>:<span class="number">768</span>, <span class="attr">"type"</span>:<span class="string">"jpg"</span>, <span class="attr">"filesize"</span>:<span class="string">""</span>, <span class="attr">"bdSrcType"</span>:<span class="string">"0"</span>, <span class="attr">"di"</span>:<span class="string">"148487110091"</span>, <span class="attr">"is"</span>:<span class="string">"0,0"</span>, <span class="attr">"bdSetImgNum"</span>:<span class="number">0</span>, <span class="attr">"bdImgnewsDate"</span>:<span class="string">"1970-01-01 08:00"</span>, <span class="attr">"fromPageTitle"</span>:<span class="string">"璇风湅鐪嬫垜鐨�杈圭墽鏄笉鏄覆鐨�"</span>, <span class="attr">"bdSourceName"</span>:<span class="string">""</span>, <span class="attr">"bdFromPageTitlePrefix"</span>:<span class="string">""</span>, <span class="attr">"isAspDianjing"</span>:<span class="literal">false</span>, <span class="attr">"token"</span>:<span class="string">""</span>, <span class="attr">"source_type"</span>:<span class="string">""</span>, <span class="attr">"tagTwo"</span>:<span class="string">""</span>, <span class="attr">"cs"</span>:<span class="string">"1150363191,333734041"</span>, <span class="attr">"os"</span>:<span class="string">"3716457608,3614219987"</span>, <span class="attr">"simid"</span>:<span class="string">"3348089744,278242429"</span>, <span class="attr">"pi"</span>:<span class="string">"0"</span>, <span class="attr">"adType"</span>:<span class="string">"0"</span>, <span class="attr">"setDowloadURL"</span>:<span class="string">""</span>, <span class="attr">"setTittle"</span>:<span class="string">""</span>, <span class="attr">"DecorateCompanyName"</span>:<span class="string">""</span>, <span class="attr">"DecorateCompanyLocation"</span>:<span class="string">""</span>, <span class="attr">"DecorateWantuUrl"</span>:<span class="string">""</span>, <span class="attr">"DecorateCompanyId"</span>:<span class="string">""</span>, <span class="attr">"DecorateCompanyGrade"</span>:<span class="string">""</span>, <span class="attr">"personalized"</span>:<span class="string">"0"</span> &#125;,&#123; <span class="attr">"thumbURL"</span>:<span class="string">"http://img4.imgtn.bdimg.com/it/u=3967093973,1537353609&amp;fm=26&amp;gp=0.jpg"</span>, <span class="attr">"middleURL"</span>:<span class="string">"http://img4.imgtn.bdimg.com/it/u=3967093973,1537353609&amp;fm=26&amp;gp=0.jpg"</span>, <span class="attr">"largeTnImageUrl"</span>:<span class="string">""</span>, <span class="attr">"hasLarge"</span> : <span class="literal">true</span>, <span class="attr">"hoverURL"</span>:<span class="string">"http://img4.imgtn.bdimg.com/it/u=3967093973,1537353609&amp;fm=26&amp;gp=0.jpg"</span>, <span class="attr">"pageNum"</span>:<span class="number">62</span>, <span class="attr">"objURL"</span>:<span class="string">"http://h.hiphotos.baidu.com/zhidao/pic/item/d52a2834349b033bbc58afc11dce36d3d439bddd.jpg"</span>, <span class="attr">"fromURL"</span>:<span class="string">"http://zhidao.baidu.com/question/1242156031728342739.html"</span>, <span class="attr">"fromURLHost"</span>:<span class="string">"zhidao.baidu.com"</span>, <span class="attr">"currentIndex"</span>:<span class="string">""</span>, <span class="attr">"width"</span>:<span class="number">780</span>, <span class="attr">"height"</span>:<span class="number">1040</span>, <span class="attr">"type"</span>:<span class="string">"jpg"</span>, <span class="attr">"filesize"</span>:<span class="string">""</span>, <span class="attr">"bdSrcType"</span>:<span class="string">"0"</span>, <span class="attr">"di"</span>:<span class="string">"89401290661"</span>, <span class="attr">"is"</span>:<span class="string">"0,0"</span>, <span class="attr">"bdSetImgNum"</span>:<span class="number">0</span>, <span class="attr">"bdImgnewsDate"</span>:<span class="string">"1970-01-01 08:00"</span>, <span class="attr">"fromPageTitle"</span>:<span class="string">"鎴戝杩欎釜姣嶄覆涓插拰杈圭墽涓查厤绉嶇殑璇濅細鐢熷嚭杈圭墽鍚�"</span>, <span class="attr">"bdSourceName"</span>:<span class="string">""</span>, <span class="attr">"bdFromPageTitlePrefix"</span>:<span class="string">""</span>, <span class="attr">"isAspDianjing"</span>:<span class="literal">false</span>, <span class="attr">"token"</span>:<span class="string">""</span>, <span class="attr">"source_type"</span>:<span class="string">""</span>, <span class="attr">"tagTwo"</span>:<span class="string">""</span>, <span class="attr">"cs"</span>:<span class="string">"3967093973,1537353609"</span>, <span class="attr">"os"</span>:<span class="string">"4070950924,522173132"</span>, <span class="attr">"simid"</span>:<span class="string">"3378736389,427982830"</span>, <span class="attr">"pi"</span>:<span class="string">"0"</span>, <span class="attr">"adType"</span>:<span class="string">"0"</span>, <span class="attr">"setDowloadURL"</span>:<span class="string">""</span>, <span class="attr">"setTittle"</span>:<span class="string">""</span>, <span class="attr">"DecorateCompanyName"</span>:<span class="string">""</span>, <span class="attr">"DecorateCompanyLocation"</span>:<span class="string">""</span>, <span class="attr">"DecorateWantuUrl"</span>:<span class="string">""</span>, <span class="attr">"DecorateCompanyId"</span>:<span class="string">""</span>, <span class="attr">"DecorateCompanyGrade"</span>:<span class="string">""</span>, <span class="attr">"personalized"</span>:<span class="string">"0"</span> &#125;,&#123; <span class="attr">"thumbURL"</span>:<span class="string">"http://img4.imgtn.bdimg.com/it/u=2088893379,3929280629&amp;fm=26&amp;gp=0.jpg"</span>, <span class="attr">"middleURL"</span>:<span class="string">"http://img4.imgtn.bdimg.com/it/u=2088893379,3929280629&amp;fm=26&amp;gp=0.jpg"</span>, <span class="attr">"largeTnImageUrl"</span>:<span class="string">""</span>, <span class="attr">"hasLarge"</span> : <span class="literal">true</span>, <span class="attr">"hoverURL"</span>:<span class="string">"http://img4.imgtn.bdimg.com/it/u=2088893379,3929280629&amp;fm=26&amp;gp=0.jpg"</span>, <span class="attr">"pageNum"</span>:<span class="number">63</span>, <span class="attr">"objURL"</span>:<span class="string">"http://g.hiphotos.baidu.com/zhidao/pic/item/9358d109b3de9c828f5e8e3e6b81800a19d84343.jpg"</span>, <span class="attr">"fromURL"</span>:<span class="string">"http://zhidao.baidu.com/question/1671228469381951107.html"</span>, <span class="attr">"fromURLHost"</span>:<span class="string">"zhidao.baidu.com"</span>, <span class="attr">"currentIndex"</span>:<span class="string">""</span>, <span class="attr">"width"</span>:<span class="number">780</span>, <span class="attr">"height"</span>:<span class="number">1040</span>, <span class="attr">"type"</span>:<span class="string">"jpg"</span>, <span class="attr">"filesize"</span>:<span class="string">""</span>, <span class="attr">"bdSrcType"</span>:<span class="string">"0"</span>, <span class="attr">"di"</span>:<span class="string">"185194576271"</span>, <span class="attr">"is"</span>:<span class="string">"0,0"</span>, <span class="attr">"bdSetImgNum"</span>:<span class="number">0</span>, <span class="attr">"bdImgnewsDate"</span>:<span class="string">"1970-01-01 08:00"</span>, <span class="attr">"fromPageTitle"</span>:<span class="string">"鎳�杈圭墽鐨勬潵 璋佸彲浠ュ憡璇夋垜 鎴戝鐙楃嫍鍒板簳鏄笉鏄拰鑻忕墽涓茬殑 寰堝枩娆� 涓�"</span>, <span class="attr">"bdSourceName"</span>:<span class="string">""</span>, <span class="attr">"bdFromPageTitlePrefix"</span>:<span class="string">""</span>, <span class="attr">"isAspDianjing"</span>:<span class="literal">false</span>, <span class="attr">"token"</span>:<span class="string">""</span>, <span class="attr">"source_type"</span>:<span class="string">""</span>, <span class="attr">"tagTwo"</span>:<span class="string">""</span>, <span class="attr">"cs"</span>:<span class="string">"2088893379,3929280629"</span>, <span class="attr">"os"</span>:<span class="string">"4196081066,1970071337"</span>, <span class="attr">"simid"</span>:<span class="string">"4194815420,749294635"</span>, <span class="attr">"pi"</span>:<span class="string">"0"</span>, <span class="attr">"adType"</span>:<span class="string">"0"</span>, <span class="attr">"setDowloadURL"</span>:<span class="string">""</span>, <span class="attr">"setTittle"</span>:<span class="string">""</span>, <span class="attr">"DecorateCompanyName"</span>:<span class="string">""</span>, <span class="attr">"DecorateCompanyLocation"</span>:<span class="string">""</span>, <span class="attr">"DecorateWantuUrl"</span>:<span class="string">""</span>, <span class="attr">"DecorateCompanyId"</span>:<span class="string">""</span>, <span class="attr">"DecorateCompanyGrade"</span>:<span class="string">""</span>, <span class="attr">"personalized"</span>:<span class="string">"0"</span> &#125;,&#123; <span class="attr">"thumbURL"</span>:<span class="string">"http://img1.imgtn.bdimg.com/it/u=4106747,2199010286&amp;fm=26&amp;gp=0.jpg"</span>, <span class="attr">"middleURL"</span>:<span class="string">"http://img1.imgtn.bdimg.com/it/u=4106747,2199010286&amp;fm=26&amp;gp=0.jpg"</span>, <span class="attr">"largeTnImageUrl"</span>:<span class="string">""</span>, <span class="attr">"hasLarge"</span> :</span><br></pre></td></tr></table></figure></p>
<p>从结果我们可以看到都是一些json的数据，但是我们依然可以从其中挖掘信息，我们看到图片都存在objurl的标签中，所以我们通过正则表达式获取其中图片链接，并下载图片，通过以上的分析我们可以了解到，通过爬虫获取数据最重要的是知道目标，然后是解析和存储，这就是一个简单爬虫工具的编写，下一步将介绍爬虫框架，写出较完整的爬虫工具。<br>我们看代码：实际上爬取JD的代码被注释了：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> urllib</span><br><span class="line"><span class="keyword">import</span> urllib2</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line">socket.setdefaulttimeout(<span class="number">20.0</span>)</span><br><span class="line"></span><br><span class="line">poxy_addr=[</span><br><span class="line"><span class="string">"61.185.219.126:3128"</span></span><br><span class="line"><span class="string">"218.247.161.37:80"</span></span><br><span class="line"><span class="string">"218.75.100.114:8080"</span></span><br><span class="line"><span class="string">"222.68.207.11:80"</span></span><br><span class="line"><span class="string">"221.204.246.116:3128"</span>]</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">craw</span><span class="params">(url,page)</span>:</span></span><br><span class="line">    print(url)</span><br><span class="line">    headers=(<span class="string">"User-Agent"</span>,<span class="string">"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:53.0) Gecko/20100101 Firefox/53.0"</span>)</span><br><span class="line">    poxy_id = <span class="number">0</span></span><br><span class="line">    <span class="comment">#poxy = urllib2.ProxyHandler(&#123;'http':poxy_addr[poxy_id]&#125;)</span></span><br><span class="line">    opener = urllib2.build_opener()</span><br><span class="line">    opener.addheaders=[headers]</span><br><span class="line">    <span class="comment">#urllib2.install_opener(opener)</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        html1 = opener.open(url).read()</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    html1 = ""</span></span><br><span class="line"><span class="string">    for i in range(5):</span></span><br><span class="line"><span class="string">        try:</span></span><br><span class="line"><span class="string">            html1 = opener.open(url).read()</span></span><br><span class="line"><span class="string">        except urllib2.URLError as e:</span></span><br><span class="line"><span class="string">            poxy_id=(poxy_id+1)%5</span></span><br><span class="line"><span class="string">            print(poxy_id)</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="comment">#print (html1)</span></span><br><span class="line">    <span class="comment">#html1 = str(html1)</span></span><br><span class="line">    partten1 = <span class="string">'"objURL":"(.+?)",'</span></span><br><span class="line">    fliter1 = re.compile(partten1).findall(html1)</span><br><span class="line">    x=<span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> imageurl <span class="keyword">in</span> fliter1:</span><br><span class="line">        imagename = <span class="string">'Baidu_Dog/'</span>+str(page)+str(x)+<span class="string">'.jpg'</span></span><br><span class="line">        <span class="comment">#imageurl = 'http://'+imageurl</span></span><br><span class="line">        print(<span class="string">"image:"</span>+imageurl)</span><br><span class="line">        print(<span class="string">"save:"</span>+imagename)</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            urllib.urlretrieve(imageurl,imagename)</span><br><span class="line">        <span class="keyword">except</span> urllib2.URLError <span class="keyword">as</span> e:</span><br><span class="line">            <span class="keyword">if</span>(hasattr(e,<span class="string">"code"</span>)):</span><br><span class="line">                x+=<span class="number">1</span></span><br><span class="line">            <span class="keyword">if</span>(hasattr(e,<span class="string">"reason"</span>)):</span><br><span class="line">                x+=<span class="number">1</span></span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        x+=<span class="number">1</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    for fliteri in fliter1:</span></span><br><span class="line"><span class="string">        partten2 = '&lt;img width="220" height="220" class="err-product" data-img="1" src="//(.+?)" /&gt;'</span></span><br><span class="line"><span class="string">        imglist = re.compile(partten2).findall(fliteri)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        x = 1</span></span><br><span class="line"><span class="string">        for imageurl in imglist:</span></span><br><span class="line"><span class="string">            imagename = 'JD_Telphone/'+str(page)+str(y)+str(x)+'.jpg'</span></span><br><span class="line"><span class="string">            imageurl = 'http://'+imageurl</span></span><br><span class="line"><span class="string">            print("image:"+imageurl)</span></span><br><span class="line"><span class="string">            print("save:"+imagename)</span></span><br><span class="line"><span class="string">            try:</span></span><br><span class="line"><span class="string">                urllib.urlretrieve(imageurl,filename=imagename)</span></span><br><span class="line"><span class="string">            except urllib2.URLError as e:</span></span><br><span class="line"><span class="string">                if(hasattr(e,"code")):</span></span><br><span class="line"><span class="string">                    x+=1</span></span><br><span class="line"><span class="string">                if(hasattr(e,"reason")):</span></span><br><span class="line"><span class="string">                    x+=1</span></span><br><span class="line"><span class="string">                x+=1</span></span><br><span class="line"><span class="string">        y+=1</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range (<span class="number">60</span>,<span class="number">3000</span>,<span class="number">60</span>):</span><br><span class="line">    url = <span class="string">'http://image.baidu.com/search/avatarjson?tn=resultjsonavatarnew&amp;ie=utf-8&amp;word=%E8%BE%B9%E7%89%A7&amp;rn=60&amp;pn='</span>+str(i)</span><br><span class="line">    craw(url,i)</span><br></pre></td></tr></table></figure></p>
<p>代码比较简单也没有什么可以分析的，有一点要提醒一下，那就是python2.x和python3.x再urllib库的使用上是有差异的，具体的差异大家可以网上找找，避免由于版本的差异导致出错。</p>
</div><div class="tags"><a href="/tags/tensorflow学习/">tensorflow学习</a></div><div class="post-nav"><a class="pre" href="/2017/07/25/总想写点啥/">总想写点啥</a><a class="next" href="/2017/07/23/tensorflow-第三弹/">tensorflow-第三弹</a></div><div id="vcomment"></div><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine@latest/dist/Valine.min.js"></script><script>var notify = 'true' == true ? true : false;
var verify = 'true' == true ? true : false;
var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick,mail,link'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;
window.valine = new Valine({
  el:'#vcomment',
  notify:notify,
  verify:verify,
  appId:'uHNJtTxLkcGm3VRtuRGk53hb-gzGzoHsz',
  appKey:'h8s1QFO2dLQ62H0axpKB6WnD',
  placeholder:'说点啥吧...',
  avatar:'mm',
  guest_info:guest_info,
  pageSize:'10'
})</script></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.baidu.com/baidu" method="get" accept-charset="utf-8" target="_blank"><input type="search" name="word" maxlength="20" placeholder="Search"><input type="hidden" name="si" value="http://www.wuweiblog.com"><input name="tn" type="hidden" value="bds"><input name="cl" type="hidden" value="3"><input name="ct" type="hidden" value="2097152"><input name="s" type="hidden" value="on"></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/书评/">书评</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/图像处理/">图像处理</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/学习/">学习</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/小说/">小说</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/影评/">影评</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/数学/">数学</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/游戏/">游戏</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/点云处理/">点云处理</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/算法/">算法</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/随感/">随感</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/ArcGIS，前端开发/" style="font-size: 15px;">ArcGIS，前端开发</a> <a href="/tags/ArcGIS开发/" style="font-size: 15px;">ArcGIS开发</a> <a href="/tags/ArcGIS环境配置/" style="font-size: 15px;">ArcGIS环境配置</a> <a href="/tags/linux-学习/" style="font-size: 15px;">linux 学习</a> <a href="/tags/开发/" style="font-size: 15px;">开发</a> <a href="/tags/数学/" style="font-size: 15px;">数学</a> <a href="/tags/学习/" style="font-size: 15px;">学习</a> <a href="/tags/图像处理数学原理/" style="font-size: 15px;">图像处理数学原理</a> <a href="/tags/效率/" style="font-size: 15px;">效率</a> <a href="/tags/系统架构-学习/" style="font-size: 15px;">系统架构 学习</a> <a href="/tags/算法/" style="font-size: 15px;">算法</a> <a href="/tags/机器学习/" style="font-size: 15px;">机器学习</a> <a href="/tags/机器学习，图像处理/" style="font-size: 15px;">机器学习，图像处理</a> <a href="/tags/tensorflow学习/" style="font-size: 15px;">tensorflow学习</a> <a href="/tags/随感/" style="font-size: 15px;">随感</a> <a href="/tags/断舍离，书评/" style="font-size: 15px;">断舍离，书评</a> <a href="/tags/沉默的大多数，书评/" style="font-size: 15px;">沉默的大多数，书评</a> <a href="/tags/Mary-and-Max，影评/" style="font-size: 15px;">Mary and Max，影评</a> <a href="/tags/呼兰河传-书评/" style="font-size: 15px;">呼兰河传,书评</a> <a href="/tags/雪中悍刀行-书评/" style="font-size: 15px;">雪中悍刀行,书评</a> <a href="/tags/未来简史-书评/" style="font-size: 15px;">未来简史,书评</a> <a href="/tags/中国经济2019-时间的答案/" style="font-size: 15px;">中国经济2019,时间的答案</a> <a href="/tags/将夜-书评/" style="font-size: 15px;">将夜,书评</a> <a href="/tags/潜规则-书评/" style="font-size: 15px;">潜规则,书评</a> <a href="/tags/熊镇-书评/" style="font-size: 15px;">熊镇,书评</a> <a href="/tags/你好疯子，影评/" style="font-size: 15px;">你好疯子，影评</a> <a href="/tags/图像处理/" style="font-size: 15px;">图像处理</a> <a href="/tags/openMVG-openMVS学习/" style="font-size: 15px;">openMVG openMVS学习</a> <a href="/tags/喜剧之王，影评/" style="font-size: 15px;">喜剧之王，影评</a> <a href="/tags/The-Legend-of-1900/" style="font-size: 15px;">The Legend of 1900</a> <a href="/tags/随感-摄影测量/" style="font-size: 15px;">随感-摄影测量</a> <a href="/tags/随感，毕业/" style="font-size: 15px;">随感，毕业</a> <a href="/tags/校正方法，控制点，光束法平差/" style="font-size: 15px;">校正方法，控制点，光束法平差</a> <a href="/tags/linux学习/" style="font-size: 15px;">linux学习</a> <a href="/tags/月亮与六便士/" style="font-size: 15px;">月亮与六便士</a> <a href="/tags/电影十二公民/" style="font-size: 15px;">电影十二公民</a> <a href="/tags/小说/" style="font-size: 15px;">小说</a> <a href="/tags/随感，死亡/" style="font-size: 15px;">随感，死亡</a> <a href="/tags/V字仇杀队-浪潮，影评/" style="font-size: 15px;">V字仇杀队,浪潮，影评</a> <a href="/tags/遗愿清单，影评/" style="font-size: 15px;">遗愿清单，影评</a> <a href="/tags/随感－代码重构/" style="font-size: 15px;">随感－代码重构</a> <a href="/tags/R-学习/" style="font-size: 15px;">R 学习</a> <a href="/tags/指环王，这个杀手不太冷/" style="font-size: 15px;">指环王，这个杀手不太冷</a> <a href="/tags/点云处理/" style="font-size: 15px;">点云处理</a> <a href="/tags/狗子日记/" style="font-size: 15px;">狗子日记</a> <a href="/tags/爱乐之城，影评/" style="font-size: 15px;">爱乐之城，影评</a> <a href="/tags/一个叫欧维的男人决定去死，书评/" style="font-size: 15px;">一个叫欧维的男人决定去死，书评</a> <a href="/tags/星际穿越，影评/" style="font-size: 15px;">星际穿越，影评</a> <a href="/tags/图像处理的数学原理/" style="font-size: 15px;">图像处理的数学原理</a> <a href="/tags/社交网络，影评/" style="font-size: 15px;">社交网络，影评</a> <a href="/tags/共产党宣言/" style="font-size: 15px;">共产党宣言</a> <a href="/tags/秒速五厘米/" style="font-size: 15px;">秒速五厘米</a> <a href="/tags/海涛之声，影评/" style="font-size: 15px;">海涛之声，影评</a> <a href="/tags/白日梦想家，影评/" style="font-size: 15px;">白日梦想家，影评</a> <a href="/tags/饥荒/" style="font-size: 15px;">饥荒</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2021/01/31/社会与资本/">社会与资本</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/01/11/你好2021/">你好2021</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/12/25/有那么一瞬间/">有那么一瞬间</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/12/06/死亡记录/">死亡记录</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/12/06/不读书-九/">不读书(九)</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/11/16/挣扎/">挣扎</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/11/02/点到三维空间直线距离计算以向量方式计算/">点到三维空间直线距离计算以向量方式计算</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/10/30/ArcGIS-结合-WebGL动态渲染1/">ArcGIS 结合 WebGL动态渲染1</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/10/30/狗子日记十一月四号/">狗子日记十一月四号</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/10/18/点云处理总结/">点云处理总结</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="https://github.com/RemoteSensingFrank" title="Github" target="_blank">Github</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2021 <a href="/." rel="nofollow">吴蔚.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/3.5.2/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/3.5.2/jquery.fancybox.min.css"><script type="text/x-mathjax-config">MathJax.Hub.Config({
  tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
  });
</script><script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML" async></script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>